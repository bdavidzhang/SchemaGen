{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Declaration of authorized sales agents for advertising inventory. Hosted at /.well-known/adagents.json on publisher domains. Can either contain the full structure inline or reference an authoritative URL.",
  "examples": [
    {
      "$schema": "/schemas/2.6.0/adagents.json",
      "authoritative_location": "https://cdn.example.com/adagents/v2/adagents.json",
      "last_updated": "2025-01-15T10:00:00Z"
    },
    {
      "$schema": "/schemas/2.6.0/adagents.json",
      "authorized_agents": [
        {
          "authorization_type": "property_tags",
          "authorized_for": "Official sales agent",
          "property_tags": [
            "all"
          ],
          "url": "https://agent.example.com"
        }
      ],
      "last_updated": "2025-01-10T12:00:00Z",
      "properties": [
        {
          "identifiers": [
            {
              "type": "domain",
              "value": "example.com"
            }
          ],
          "name": "Example Site",
          "property_type": "website",
          "publisher_domain": "example.com"
        }
      ],
      "tags": {
        "all": {
          "description": "All properties in this file",
          "name": "All Properties"
        }
      }
    },
    {
      "$schema": "/schemas/2.6.0/adagents.json",
      "authorized_agents": [
        {
          "authorization_type": "property_tags",
          "authorized_for": "All Meta properties",
          "property_tags": [
            "meta_network"
          ],
          "url": "https://meta-ads.com"
        }
      ],
      "contact": {
        "domain": "meta.com",
        "email": "adops@meta.com",
        "name": "Meta Advertising Operations",
        "seller_id": "pub-meta-12345",
        "tag_id": "12345"
      },
      "last_updated": "2025-01-10T15:30:00Z",
      "properties": [
        {
          "identifiers": [
            {
              "type": "ios_bundle",
              "value": "com.burbn.instagram"
            },
            {
              "type": "android_package",
              "value": "com.instagram.android"
            }
          ],
          "name": "Instagram",
          "property_type": "mobile_app",
          "publisher_domain": "instagram.com",
          "tags": [
            "meta_network",
            "social_media"
          ]
        },
        {
          "identifiers": [
            {
              "type": "ios_bundle",
              "value": "com.facebook.Facebook"
            },
            {
              "type": "android_package",
              "value": "com.facebook.katana"
            }
          ],
          "name": "Facebook",
          "property_type": "mobile_app",
          "publisher_domain": "facebook.com",
          "tags": [
            "meta_network",
            "social_media"
          ]
        },
        {
          "identifiers": [
            {
              "type": "ios_bundle",
              "value": "net.whatsapp.WhatsApp"
            },
            {
              "type": "android_package",
              "value": "com.whatsapp"
            }
          ],
          "name": "WhatsApp",
          "property_type": "mobile_app",
          "publisher_domain": "whatsapp.com",
          "tags": [
            "meta_network",
            "messaging"
          ]
        }
      ],
      "tags": {
        "messaging": {
          "description": "Messaging and communication apps",
          "name": "Messaging Apps"
        },
        "meta_network": {
          "description": "All Meta-owned properties",
          "name": "Meta Network"
        },
        "social_media": {
          "description": "Social networking applications",
          "name": "Social Media Apps"
        }
      }
    },
    {
      "$schema": "/schemas/2.6.0/adagents.json",
      "authorized_agents": [
        {
          "authorization_type": "property_tags",
          "authorized_for": "Tumblr corporate properties only",
          "property_tags": [
            "corporate"
          ],
          "url": "https://tumblr-sales.com"
        }
      ],
      "contact": {
        "name": "Tumblr Advertising"
      },
      "last_updated": "2025-01-10T16:00:00Z",
      "properties": [
        {
          "identifiers": [
            {
              "type": "domain",
              "value": "tumblr.com"
            }
          ],
          "name": "Tumblr Corporate",
          "property_type": "website",
          "publisher_domain": "tumblr.com",
          "tags": [
            "corporate"
          ]
        }
      ],
      "tags": {
        "corporate": {
          "description": "Tumblr-owned corporate properties (not user blogs)",
          "name": "Corporate Properties"
        }
      }
    },
    {
      "$schema": "/schemas/2.6.0/adagents.json",
      "authorized_agents": [
        {
          "authorization_type": "publisher_properties",
          "authorized_for": "CNN CTV properties via publisher authorization",
          "publisher_properties": [
            {
              "property_ids": [
                "cnn_ctv_app"
              ],
              "publisher_domain": "cnn.com",
              "selection_type": "by_id"
            }
          ],
          "url": "https://agent.example/api"
        },
        {
          "authorization_type": "publisher_properties",
          "authorized_for": "All CTV properties from multiple publishers",
          "publisher_properties": [
            {
              "property_tags": [
                "ctv"
              ],
              "publisher_domain": "cnn.com",
              "selection_type": "by_tag"
            },
            {
              "property_tags": [
                "ctv"
              ],
              "publisher_domain": "espn.com",
              "selection_type": "by_tag"
            }
          ],
          "url": "https://agent.example/api"
        }
      ],
      "contact": {
        "domain": "agent.example",
        "email": "sales@agent.example",
        "name": "Example Third-Party Sales Agent"
      },
      "last_updated": "2025-01-10T17:00:00Z"
    },
    {
      "$schema": "/schemas/2.6.0/adagents.json",
      "authorized_agents": [
        {
          "authorization_type": "property_tags",
          "authorized_for": "All news properties",
          "property_tags": [
            "news"
          ],
          "url": "https://sales.news.example.com"
        }
      ],
      "contact": {
        "domain": "news.example.com",
        "email": "adops@news.example.com",
        "name": "Premium News Publisher"
      },
      "last_updated": "2025-01-10T18:00:00Z",
      "properties": [
        {
          "identifiers": [
            {
              "type": "domain",
              "value": "news.example.com"
            }
          ],
          "name": "News Example",
          "property_type": "website",
          "publisher_domain": "news.example.com",
          "tags": [
            "premium",
            "news"
          ]
        }
      ],
      "property_features": [
        {
          "features": [
            "carbon_score",
            "sustainability_grade"
          ],
          "name": "Scope3",
          "publisher_id": "pub_news_12345",
          "url": "https://api.scope3.com"
        },
        {
          "features": [
            "tag_certified_against_fraud",
            "tag_brand_safety_certified"
          ],
          "name": "TAG",
          "url": "https://api.tagtoday.net"
        },
        {
          "features": [
            "gdpr_compliant",
            "tcf_registered",
            "ccpa_compliant"
          ],
          "name": "OneTrust",
          "publisher_id": "ot_news_67890",
          "url": "https://api.onetrust.com"
        }
      ],
      "tags": {
        "news": {
          "description": "News and journalism content",
          "name": "News Properties"
        },
        "premium": {
          "description": "High-quality, brand-safe properties",
          "name": "Premium Properties"
        }
      }
    }
  ],
  "oneOf": [
    {
      "additionalProperties": true,
      "description": "URL reference variant - points to the authoritative location of the adagents.json file",
      "properties": {
        "$schema": {
          "description": "JSON Schema identifier for this adagents.json file",
          "type": "string"
        },
        "authoritative_location": {
          "description": "HTTPS URL of the authoritative adagents.json file. When present, this file is a reference and the authoritative location contains the actual agent authorization data.",
          "format": "uri",
          "pattern": "^https://",
          "type": "string"
        },
        "last_updated": {
          "description": "ISO 8601 timestamp indicating when this reference was last updated",
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "authoritative_location"
      ],
      "type": "object"
    },
    {
      "additionalProperties": true,
      "description": "Inline structure variant - contains full agent authorization data",
      "properties": {
        "$schema": {
          "description": "JSON Schema identifier for this adagents.json file",
          "type": "string"
        },
        "authorized_agents": {
          "description": "Array of sales agents authorized to sell inventory for properties in this file",
          "items": {
            "oneOf": [
              {
                "additionalProperties": true,
                "properties": {
                  "authorization_type": {
                    "const": "property_ids",
                    "description": "Discriminator indicating authorization by specific property IDs",
                    "type": "string"
                  },
                  "authorized_for": {
                    "description": "Human-readable description of what this agent is authorized to sell",
                    "maxLength": 500,
                    "minLength": 1,
                    "type": "string"
                  },
                  "property_ids": {
                    "description": "Property IDs this agent is authorized for. Resolved against the top-level properties array in this file",
                    "items": {
                      "$ref": "core/property-id.json"
                    },
                    "minItems": 1,
                    "type": "array"
                  },
                  "url": {
                    "description": "The authorized agent's API endpoint URL",
                    "format": "uri",
                    "type": "string"
                  }
                },
                "required": [
                  "url",
                  "authorized_for",
                  "authorization_type",
                  "property_ids"
                ],
                "type": "object"
              },
              {
                "additionalProperties": true,
                "properties": {
                  "authorization_type": {
                    "const": "property_tags",
                    "description": "Discriminator indicating authorization by property tags",
                    "type": "string"
                  },
                  "authorized_for": {
                    "description": "Human-readable description of what this agent is authorized to sell",
                    "maxLength": 500,
                    "minLength": 1,
                    "type": "string"
                  },
                  "property_tags": {
                    "description": "Tags identifying which properties this agent is authorized for. Resolved against the top-level properties array in this file using tag matching",
                    "items": {
                      "$ref": "core/property-tag.json"
                    },
                    "minItems": 1,
                    "type": "array"
                  },
                  "url": {
                    "description": "The authorized agent's API endpoint URL",
                    "format": "uri",
                    "type": "string"
                  }
                },
                "required": [
                  "url",
                  "authorized_for",
                  "authorization_type",
                  "property_tags"
                ],
                "type": "object"
              },
              {
                "additionalProperties": true,
                "properties": {
                  "authorization_type": {
                    "const": "inline_properties",
                    "description": "Discriminator indicating authorization by inline property definitions",
                    "type": "string"
                  },
                  "authorized_for": {
                    "description": "Human-readable description of what this agent is authorized to sell",
                    "maxLength": 500,
                    "minLength": 1,
                    "type": "string"
                  },
                  "properties": {
                    "description": "Specific properties this agent is authorized for (alternative to property_ids/property_tags)",
                    "items": {
                      "$ref": "core/property.json"
                    },
                    "minItems": 1,
                    "type": "array"
                  },
                  "url": {
                    "description": "The authorized agent's API endpoint URL",
                    "format": "uri",
                    "type": "string"
                  }
                },
                "required": [
                  "url",
                  "authorized_for",
                  "authorization_type",
                  "properties"
                ],
                "type": "object"
              },
              {
                "additionalProperties": true,
                "properties": {
                  "authorization_type": {
                    "const": "publisher_properties",
                    "description": "Discriminator indicating authorization for properties from other publisher domains",
                    "type": "string"
                  },
                  "authorized_for": {
                    "description": "Human-readable description of what this agent is authorized to sell",
                    "maxLength": 500,
                    "minLength": 1,
                    "type": "string"
                  },
                  "publisher_properties": {
                    "description": "Properties from other publisher domains this agent is authorized for. Each entry specifies a publisher domain and which of their properties this agent can sell",
                    "items": {
                      "$ref": "core/publisher-property-selector.json"
                    },
                    "minItems": 1,
                    "type": "array"
                  },
                  "url": {
                    "description": "The authorized agent's API endpoint URL",
                    "format": "uri",
                    "type": "string"
                  }
                },
                "required": [
                  "url",
                  "authorized_for",
                  "authorization_type",
                  "publisher_properties"
                ],
                "type": "object"
              }
            ]
          },
          "minItems": 1,
          "type": "array"
        },
        "contact": {
          "additionalProperties": true,
          "description": "Contact information for the entity managing this adagents.json file (may be publisher or third-party operator)",
          "properties": {
            "domain": {
              "description": "Primary domain of the entity managing this file",
              "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$",
              "type": "string"
            },
            "email": {
              "description": "Contact email for questions or issues with this authorization file",
              "format": "email",
              "maxLength": 255,
              "minLength": 1,
              "type": "string"
            },
            "name": {
              "description": "Name of the entity managing this file (e.g., 'Meta Advertising Operations', 'Clear Channel Digital')",
              "maxLength": 255,
              "minLength": 1,
              "type": "string"
            },
            "seller_id": {
              "description": "Seller ID from IAB Tech Lab sellers.json (if applicable)",
              "maxLength": 255,
              "minLength": 1,
              "type": "string"
            },
            "tag_id": {
              "description": "TAG Certified Against Fraud ID for verification (if applicable)",
              "maxLength": 100,
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "name"
          ],
          "type": "object"
        },
        "last_updated": {
          "description": "ISO 8601 timestamp indicating when this file was last updated",
          "format": "date-time",
          "type": "string"
        },
        "properties": {
          "description": "Array of all properties covered by this adagents.json file. Defines the canonical property list that authorized agents reference.",
          "items": {
            "$ref": "core/property.json"
          },
          "minItems": 1,
          "type": "array"
        },
        "property_features": {
          "description": "[AdCP 3.0] Optional list of agents that provide property feature data (certifications, scores, compliance status). Used for discovery - actual data comes from querying the agent's get_property_features task.",
          "items": {
            "additionalProperties": true,
            "properties": {
              "features": {
                "description": "Feature IDs this agent provides (e.g., 'carbon_score', 'tag_certified_against_fraud'). Use list_property_features on the agent for full definitions.",
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              },
              "name": {
                "description": "Human-readable name of the vendor/agent (e.g., 'Scope3', 'TAG', 'OneTrust')",
                "type": "string"
              },
              "publisher_id": {
                "description": "Optional publisher identifier at this agent (for lookup)",
                "type": "string"
              },
              "url": {
                "description": "The agent's API endpoint URL (must implement get_property_features)",
                "format": "uri",
                "type": "string"
              }
            },
            "required": [
              "url",
              "name",
              "features"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "tags": {
          "additionalProperties": {
            "additionalProperties": true,
            "properties": {
              "description": {
                "description": "Description of what this tag represents",
                "type": "string"
              },
              "name": {
                "description": "Human-readable name for this tag",
                "type": "string"
              }
            },
            "required": [
              "name",
              "description"
            ],
            "type": "object"
          },
          "description": "Metadata for each tag referenced by properties. Provides human-readable context for property tag values.",
          "type": "object"
        }
      },
      "required": [
        "authorized_agents"
      ],
      "type": "object"
    }
  ],
  "title": "Authorized Sales Agents"
}