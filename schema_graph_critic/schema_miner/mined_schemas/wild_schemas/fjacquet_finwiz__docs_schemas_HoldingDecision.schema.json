{
  "$defs": {
    "APlusImprovementSuggestion": {
      "additionalProperties": false,
      "description": "A+ improvement suggestion for a specific holding.",
      "properties": {
        "improvement_type": {
          "description": "Type of improvement suggested",
          "enum": [
            "replacement",
            "addition",
            "rebalancing"
          ],
          "title": "Improvement Type",
          "type": "string"
        },
        "recommended_symbol": {
          "description": "Recommended A+ investment symbol",
          "title": "Recommended Symbol",
          "type": "string"
        },
        "recommended_name": {
          "description": "Full name of recommended investment",
          "title": "Recommended Name",
          "type": "string"
        },
        "recommended_grade": {
          "description": "Grade of recommended investment",
          "enum": [
            "A+",
            "A",
            "B+",
            "B",
            "C+",
            "C",
            "D",
            "F"
          ],
          "title": "Recommended Grade",
          "type": "string"
        },
        "expected_grade_improvement": {
          "description": "Expected numerical improvement in grade",
          "title": "Expected Grade Improvement",
          "type": "number"
        },
        "grade_improvement_description": {
          "description": "Human-readable description of grade improvement",
          "title": "Grade Improvement Description",
          "type": "string"
        },
        "allocation_percentage": {
          "description": "Recommended allocation percentage",
          "maximum": 100.0,
          "minimum": 0.0,
          "title": "Allocation Percentage",
          "type": "number"
        },
        "implementation_priority": {
          "description": "Implementation priority",
          "enum": [
            "high",
            "medium",
            "low"
          ],
          "title": "Implementation Priority",
          "type": "string"
        },
        "rationale": {
          "description": "Detailed rationale for the improvement",
          "title": "Rationale",
          "type": "string"
        },
        "expected_annual_benefit": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Expected annual benefit in percentage points",
          "title": "Expected Annual Benefit"
        },
        "risk_impact_description": {
          "description": "Description of risk impact",
          "title": "Risk Impact Description",
          "type": "string"
        },
        "cost_analysis": {
          "additionalProperties": {
            "type": "number"
          },
          "description": "Transaction costs and fees",
          "title": "Cost Analysis",
          "type": "object"
        },
        "implementation_notes": {
          "description": "Implementation considerations",
          "items": {
            "type": "string"
          },
          "title": "Implementation Notes",
          "type": "array"
        }
      },
      "required": [
        "improvement_type",
        "recommended_symbol",
        "recommended_name",
        "recommended_grade",
        "expected_grade_improvement",
        "grade_improvement_description",
        "allocation_percentage",
        "implementation_priority",
        "rationale",
        "risk_impact_description"
      ],
      "title": "APlusImprovementSuggestion",
      "type": "object"
    },
    "Alternative": {
      "additionalProperties": false,
      "properties": {
        "ticker": {
          "title": "Ticker",
          "type": "string"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "asset_class": {
          "enum": [
            "stock",
            "etf",
            "crypto"
          ],
          "title": "Asset Class",
          "type": "string"
        },
        "composite_score": {
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Composite Score",
          "type": "number"
        },
        "grade": {
          "description": "Letter grade (A+ to F)",
          "enum": [
            "A+",
            "A",
            "B+",
            "B",
            "C+",
            "C",
            "D",
            "F"
          ],
          "title": "Grade",
          "type": "string"
        },
        "grade_description": {
          "description": "Human-readable grade description",
          "title": "Grade Description",
          "type": "string"
        },
        "recommended_action": {
          "description": "Recommended action based on grade",
          "title": "Recommended Action",
          "type": "string"
        },
        "risk_score_standardized": {
          "maximum": 5.0,
          "minimum": 0.0,
          "title": "Risk Score Standardized",
          "type": "number"
        },
        "key_metrics": {
          "additionalProperties": true,
          "title": "Key Metrics",
          "type": "object"
        },
        "thesis_bullets": {
          "items": {
            "type": "string"
          },
          "maxItems": 10,
          "title": "Thesis Bullets",
          "type": "array"
        },
        "citations": {
          "items": {
            "type": "string"
          },
          "maxItems": 10,
          "title": "Citations",
          "type": "array"
        },
        "is_a_plus_candidate": {
          "default": false,
          "description": "Whether this is an A+ grade candidate",
          "title": "Is A Plus Candidate",
          "type": "boolean"
        },
        "discovery_source": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Source of A+ discovery (e.g., 'investment_discovery_crew')",
          "title": "Discovery Source"
        },
        "confidence_level": {
          "anyOf": [
            {
              "maximum": 1.0,
              "minimum": 0.0,
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Confidence in A+ classification",
          "title": "Confidence Level"
        },
        "expected_annual_benefit": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Expected annual benefit in percentage points",
          "title": "Expected Annual Benefit"
        }
      },
      "required": [
        "ticker",
        "name",
        "asset_class",
        "composite_score",
        "grade",
        "grade_description",
        "recommended_action",
        "risk_score_standardized"
      ],
      "title": "Alternative",
      "type": "object"
    },
    "RiskAssessmentStandardized": {
      "additionalProperties": false,
      "description": "Standardized risk assessment across Stock/ETF/Crypto on a 0-5 scale.\n\n- score: 0 (lowest) .. 5 (highest)\n- level: human-friendly label mapped from score\n- risk_factors: up to 10 concise reasons\n- scale: reserved for future alternate encodings",
      "properties": {
        "scale": {
          "default": "0_5",
          "enum": [
            "0_5",
            "L_M_H",
            "L_M_H_VH"
          ],
          "title": "Scale",
          "type": "string"
        },
        "score": {
          "maximum": 5.0,
          "minimum": 0.0,
          "title": "Score",
          "type": "number"
        },
        "level": {
          "enum": [
            "Low",
            "Medium",
            "High",
            "Very High"
          ],
          "title": "Level",
          "type": "string"
        },
        "risk_factors": {
          "items": {
            "type": "string"
          },
          "maxItems": 10,
          "title": "Risk Factors",
          "type": "array"
        }
      },
      "required": [
        "score",
        "level"
      ],
      "title": "RiskAssessmentStandardized",
      "type": "object"
    }
  },
  "additionalProperties": false,
  "properties": {
    "asset_class": {
      "enum": [
        "stock",
        "etf",
        "crypto"
      ],
      "title": "Asset Class",
      "type": "string"
    },
    "name": {
      "title": "Name",
      "type": "string"
    },
    "ticker": {
      "title": "Ticker",
      "type": "string"
    },
    "currency": {
      "title": "Currency",
      "type": "string"
    },
    "decision": {
      "enum": [
        "KEEP",
        "SELL"
      ],
      "title": "Decision",
      "type": "string"
    },
    "composite_score": {
      "maximum": 1.0,
      "minimum": 0.0,
      "title": "Composite Score",
      "type": "number"
    },
    "grade": {
      "description": "Letter grade (A+ to F)",
      "enum": [
        "A+",
        "A",
        "B+",
        "B",
        "C+",
        "C",
        "D",
        "F"
      ],
      "title": "Grade",
      "type": "string"
    },
    "grade_description": {
      "description": "Human-readable grade description",
      "title": "Grade Description",
      "type": "string"
    },
    "recommended_action": {
      "description": "Recommended action based on grade",
      "title": "Recommended Action",
      "type": "string"
    },
    "risk": {
      "$ref": "#/$defs/RiskAssessmentStandardized"
    },
    "rationale_bullets": {
      "items": {
        "type": "string"
      },
      "maxItems": 10,
      "title": "Rationale Bullets",
      "type": "array"
    },
    "citations": {
      "items": {
        "type": "string"
      },
      "maxItems": 10,
      "title": "Citations",
      "type": "array"
    },
    "alternatives": {
      "items": {
        "$ref": "#/$defs/Alternative"
      },
      "maxItems": 3,
      "title": "Alternatives",
      "type": "array"
    },
    "a_plus_improvement_suggestions": {
      "description": "A+ improvement suggestions for this holding",
      "items": {
        "$ref": "#/$defs/APlusImprovementSuggestion"
      },
      "maxItems": 5,
      "title": "A Plus Improvement Suggestions",
      "type": "array"
    },
    "has_a_plus_opportunities": {
      "default": false,
      "description": "Whether A+ improvement opportunities exist for this holding",
      "title": "Has A Plus Opportunities",
      "type": "boolean"
    },
    "current_grade_potential": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Assessment of current holding's potential for grade improvement",
      "title": "Current Grade Potential"
    }
  },
  "required": [
    "asset_class",
    "name",
    "ticker",
    "currency",
    "decision",
    "composite_score",
    "grade",
    "grade_description",
    "recommended_action",
    "risk"
  ],
  "title": "HoldingDecision",
  "type": "object"
}