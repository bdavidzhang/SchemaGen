{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://mirrordna.org/schema/glyphtrail_entry.schema.json",
  "title": "MirrorDNA GlyphTrail Entry",
  "description": "Entry in GlyphTrail interaction lineage log",
  "version": "1.0.0",
  "type": "object",
  "required": ["id", "timestamp", "glyph", "source"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^glyph_[a-z0-9_]{16,}$",
      "description": "Unique glyph trail entry identifier"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of glyph creation"
    },
    "glyph": {
      "type": "string",
      "description": "Glyph symbol or identifier"
    },
    "glyph_type": {
      "type": "string",
      "enum": ["beacon", "marker", "anchor", "transition", "reflection", "custom"],
      "description": "Type of glyph"
    },
    "context": {
      "type": "object",
      "description": "Contextual information about the glyph",
      "properties": {
        "session_id": {
          "type": "string",
          "description": "Associated session identifier"
        },
        "interaction_phase": {
          "type": "string",
          "description": "Phase of interaction (opening, exploration, resolution, etc.)"
        },
        "sentiment": {
          "type": "string",
          "enum": ["positive", "neutral", "negative", "mixed"],
          "description": "Emotional sentiment if applicable"
        }
      }
    },
    "source": {
      "type": "object",
      "required": ["actor_id", "actor_type"],
      "description": "Source of the glyph",
      "properties": {
        "actor_id": {
          "type": "string",
          "description": "Identity ID of actor creating glyph"
        },
        "actor_type": {
          "type": "string",
          "enum": ["user", "agent", "system"],
          "description": "Type of actor"
        },
        "origin": {
          "type": "string",
          "description": "Origin system or interface"
        }
      }
    },
    "vault_ref": {
      "type": "string",
      "pattern": "^vault_[a-z0-9_]{16,}$",
      "description": "Reference to vault containing related data"
    },
    "predecessor": {
      "type": "string",
      "pattern": "^glyph_[a-z0-9_]{16,}$",
      "description": "Previous glyph in trail"
    },
    "successor": {
      "type": "string",
      "pattern": "^glyph_[a-z0-9_]{16,}$",
      "description": "Next glyph in trail"
    },
    "metadata": {
      "type": "object",
      "description": "Additional glyph metadata"
    }
  },
  "additionalProperties": false
}
