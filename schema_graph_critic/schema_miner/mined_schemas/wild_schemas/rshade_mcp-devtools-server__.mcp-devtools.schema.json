{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "title": "MCP DevTools Server Configuration Schema",
  "description": "Schema for MCP DevTools Server project-specific settings",
  "properties": {
    "commands": {
      "type": "object",
      "description": "Custom command mappings for this project",
      "properties": {
        "lint": {
          "type": "string",
          "description": "Command to run for linting"
        },
        "test": {
          "type": "string",
          "description": "Command to run for testing"
        },
        "build": {
          "type": "string",
          "description": "Command to run for building"
        },
        "clean": {
          "type": "string",
          "description": "Command to run for cleaning build artifacts"
        },
        "depend": {
          "type": "string",
          "description": "Command to run for installing dependencies"
        }
      },
      "additionalProperties": {
        "type": "string"
      }
    },
    "linters": {
      "type": "array",
      "description": "List of linters to use for this project",
      "items": {
        "type": "string",
        "enum": ["eslint", "markdownlint", "yamllint", "flake8", "black", "ruff", "pyright", "mypy", "bandit", "clippy", "rustfmt", "golangci-lint", "gofmt", "staticcheck"]
      },
      "uniqueItems": true
    },
    "testRunner": {
      "type": "string",
      "description": "Preferred test runner for this project",
      "enum": ["jest", "vitest", "pytest", "go", "cargo", "npm", "make"]
    },
    "timeout": {
      "type": "number",
      "description": "Default timeout for commands in milliseconds",
      "minimum": 1000,
      "maximum": 600000
    },
    "projectType": {
      "type": "string",
      "description": "Override automatic project type detection",
      "enum": ["nodejs", "python", "go", "rust", "java", "dotnet", "mixed"]
    },
    "buildSystem": {
      "type": "string",
      "description": "Override automatic build system detection",
      "enum": ["make", "npm", "yarn", "pnpm", "bun", "pip", "uv", "poetry", "pipenv", "go", "cargo", "maven", "gradle", "dotnet"]
    },
    "makeTargets": {
      "type": "array",
      "description": "Override automatic make target detection",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "excludePaths": {
      "type": "array",
      "description": "Paths to exclude from file operations (glob patterns)",
      "items": {
        "type": "string"
      }
    },
    "environment": {
      "type": "object",
      "description": "Environment variables to set for all commands",
      "additionalProperties": {
        "type": "string"
      }
    },
    "parallel": {
      "type": "object",
      "description": "Parallel execution settings",
      "properties": {
        "makeJobs": {
          "type": "number",
          "description": "Default number of parallel make jobs",
          "minimum": 1,
          "maximum": 16
        },
        "enableTestParallel": {
          "type": "boolean",
          "description": "Enable parallel test execution when supported"
        }
      }
    },
    "security": {
      "type": "object",
      "description": "Security-related settings",
      "properties": {
        "allowedCommands": {
          "type": "array",
          "description": "Additional commands to allow (extends default allowlist)",
          "items": {
            "type": "string"
          },
          "uniqueItems": true
        },
        "restrictedPaths": {
          "type": "array",
          "description": "Paths that are off-limits for execution",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "golang": {
      "type": "object",
      "description": "Go-specific configuration",
      "properties": {
        "goPath": {
          "type": "string",
          "description": "Custom GOPATH if needed"
        },
        "goModule": {
          "type": "boolean",
          "description": "Whether to use Go modules"
        },
        "testFlags": {
          "type": "array",
          "description": "Default flags for go test",
          "items": {
            "type": "string"
          }
        },
        "lintConfig": {
          "type": "string",
          "description": "Path to golangci-lint config file"
        }
      }
    },
    "python": {
      "type": "object",
      "description": "Python-specific configuration for modern Python tooling (uv, ruff, pyright, pytest)",
      "properties": {
        "packageManager": {
          "type": "string",
          "description": "Python package manager to use",
          "enum": ["uv", "poetry", "pipenv", "pip"],
          "default": "uv"
        },
        "pythonVersion": {
          "type": "string",
          "description": "Target Python version (e.g., 3.11, 3.12)",
          "pattern": "^3\\.[0-9]+$"
        },
        "venvPath": {
          "type": "string",
          "description": "Path to virtual environment",
          "default": ".venv"
        },
        "testFlags": {
          "type": "array",
          "description": "Default flags for pytest",
          "items": {
            "type": "string"
          },
          "default": ["-v", "--cov=.", "--cov-report=term-missing"]
        },
        "linter": {
          "type": "object",
          "description": "Linter configuration (ruff preferred over flake8)",
          "properties": {
            "tool": {
              "type": "string",
              "description": "Linting tool to use",
              "enum": ["ruff", "flake8"],
              "default": "ruff"
            },
            "fix": {
              "type": "boolean",
              "description": "Automatically fix issues",
              "default": false
            },
            "select": {
              "type": "array",
              "description": "Ruff rule categories to enable",
              "items": {
                "type": "string"
              },
              "default": ["E", "F", "I", "UP"]
            }
          }
        },
        "formatter": {
          "type": "object",
          "description": "Formatter configuration (ruff format preferred over black)",
          "properties": {
            "tool": {
              "type": "string",
              "description": "Formatting tool to use",
              "enum": ["ruff", "black"],
              "default": "ruff"
            },
            "lineLength": {
              "type": "number",
              "description": "Maximum line length",
              "minimum": 79,
              "maximum": 200,
              "default": 88
            }
          }
        },
        "typeChecker": {
          "type": "object",
          "description": "Type checker configuration (pyright preferred over mypy)",
          "properties": {
            "tool": {
              "type": "string",
              "description": "Type checking tool to use",
              "enum": ["pyright", "mypy"],
              "default": "pyright"
            },
            "level": {
              "type": "string",
              "description": "Type checking strictness level",
              "enum": ["basic", "standard", "strict", "all"],
              "default": "standard"
            }
          }
        },
        "security": {
          "type": "object",
          "description": "Security scanning configuration",
          "properties": {
            "enableBandit": {
              "type": "boolean",
              "description": "Enable bandit security scanner",
              "default": true
            },
            "enablePipAudit": {
              "type": "boolean",
              "description": "Enable pip-audit vulnerability scanner",
              "default": true
            },
            "severity": {
              "type": "string",
              "description": "Minimum severity level to report",
              "enum": ["low", "medium", "high", "all"],
              "default": "medium"
            }
          }
        }
      }
    },
    "fileValidation": {
      "type": "object",
      "description": "File validation and compliance settings",
      "properties": {
        "newline": {
          "type": "object",
          "description": "POSIX newline compliance settings",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable newline validation",
              "default": true
            },
            "autoFix": {
              "type": "boolean",
              "description": "Automatically fix files on check",
              "default": false
            },
            "exclude": {
              "type": "array",
              "description": "Patterns to exclude from checking",
              "items": {
                "type": "string"
              },
              "default": ["node_modules/**", "dist/**", "*.min.js"]
            },
            "fileTypes": {
              "type": "array",
              "description": "File extensions to check",
              "items": {
                "type": "string"
              },
              "default": ["*.ts", "*.js", "*.go", "*.md", "*.json", "*.yaml"]
            }
          }
        }
      }
    },
    "cache": {
      "type": "object",
      "description": "In-process cache configuration for performance optimization",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable caching system",
          "default": true
        },
        "maxMemoryMB": {
          "type": "number",
          "description": "Maximum cache memory usage in megabytes",
          "minimum": 10,
          "maximum": 1000,
          "default": 100
        },
        "ttl": {
          "type": "object",
          "description": "Time-to-live (TTL) settings for cache namespaces in milliseconds",
          "properties": {
            "projectDetection": {
              "type": "number",
              "description": "TTL for project detection cache (default: 60000ms / 1 minute)",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 60000
            },
            "gitOperations": {
              "type": "number",
              "description": "TTL for git operations cache (default: 30000ms / 30 seconds)",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 30000
            },
            "goModules": {
              "type": "number",
              "description": "TTL for Go modules cache (default: 300000ms / 5 minutes)",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 300000
            },
            "pythonModules": {
              "type": "number",
              "description": "TTL for Python modules cache (default: 300000ms / 5 minutes)",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 300000
            },
            "nodeModules": {
              "type": "number",
              "description": "TTL for Node.js modules cache (default: 300000ms / 5 minutes)",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 300000
            },
            "fileLists": {
              "type": "number",
              "description": "TTL for file list cache (default: 30000ms / 30 seconds)",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 30000
            },
            "commandAvailability": {
              "type": "number",
              "description": "TTL for command availability cache (default: 3600000ms / 1 hour)",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 3600000
            },
            "testResults": {
              "type": "number",
              "description": "TTL for test results cache (default: 60000ms / 1 minute)",
              "minimum": 1000,
              "maximum": 3600000,
              "default": 60000
            }
          }
        },
        "maxItems": {
          "type": "object",
          "description": "Maximum number of items per cache namespace",
          "properties": {
            "projectDetection": {
              "type": "number",
              "description": "Max items in project detection cache (default: 50)",
              "minimum": 10,
              "maximum": 1000,
              "default": 50
            },
            "gitOperations": {
              "type": "number",
              "description": "Max items in git operations cache (default: 100)",
              "minimum": 10,
              "maximum": 1000,
              "default": 100
            },
            "goModules": {
              "type": "number",
              "description": "Max items in Go modules cache (default: 50)",
              "minimum": 10,
              "maximum": 1000,
              "default": 50
            },
            "pythonModules": {
              "type": "number",
              "description": "Max items in Python modules cache (default: 50)",
              "minimum": 10,
              "maximum": 1000,
              "default": 50
            },
            "nodeModules": {
              "type": "number",
              "description": "Max items in Node.js modules cache (default: 50)",
              "minimum": 10,
              "maximum": 1000,
              "default": 50
            },
            "fileLists": {
              "type": "number",
              "description": "Max items in file list cache (default: 200)",
              "minimum": 10,
              "maximum": 1000,
              "default": 200
            },
            "commandAvailability": {
              "type": "number",
              "description": "Max items in command availability cache (default: 50)",
              "minimum": 10,
              "maximum": 1000,
              "default": 50
            },
            "testResults": {
              "type": "number",
              "description": "Max items in test results cache (default: 100)",
              "minimum": 10,
              "maximum": 1000,
              "default": 100
            }
          }
        },
        "checksumTracking": {
          "type": "object",
          "description": "File checksum tracking for cache invalidation",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable automatic cache invalidation on file changes",
              "default": true
            },
            "watchIntervalMs": {
              "type": "number",
              "description": "Interval for checking file changes in milliseconds",
              "minimum": 1000,
              "maximum": 60000,
              "default": 5000
            },
            "algorithm": {
              "type": "string",
              "description": "Hash algorithm for checksum calculation",
              "enum": ["sha256", "md5"],
              "default": "sha256"
            }
          }
        }
      }
    },
    "plugins": {
      "type": "object",
      "description": "Plugin system configuration",
      "properties": {
        "enabled": {
          "type": "array",
          "description": "List of plugins to enable (if empty, all non-disabled plugins are enabled)",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "default": ["git-spice"]
        },
        "disabled": {
          "type": "array",
          "description": "List of plugins to explicitly disable",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "default": []
        },
        "git-spice": {
          "type": "object",
          "description": "git-spice plugin configuration",
          "properties": {
            "defaultBranch": {
              "type": "string",
              "description": "Default base branch for stack operations",
              "default": "main"
            },
            "autoRestack": {
              "type": "boolean",
              "description": "Automatically restack branches on changes",
              "default": false
            },
            "jsonOutput": {
              "type": "boolean",
              "description": "Use JSON output format when available",
              "default": true
            },
            "timeout": {
              "type": "number",
              "description": "Command timeout in milliseconds",
              "minimum": 1000,
              "maximum": 300000,
              "default": 60000
            }
          }
        }
      },
      "additionalProperties": {
        "type": "object",
        "description": "Plugin-specific configuration sections"
      }
    }
  },
  "additionalProperties": false
}